{
  "pluginAlias": "XiaomiAirPurifierPlatform",
  "pluginType": "platform",
  "singular": true,
  "schema": {
    "type": "object",
    "required": ["deviceCfgs"],
    "properties": {
      "deviceCfgs": {
        "title": "Devices",
        "type": "array",
        "minItems": 1,
        "items": {
          "type": "object",
          "required": ["name", "ip", "token", "type"],
          "properties": {
            "name": {
              "title": "Name (공기청정기 이름)",
              "type": "string",
              "default": "Air Purifier"
            },
            "ip": {
              "title": "IP Address",
              "type": "string",
              "format": "ipv4",
              "pattern": "^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}$"
            },
            "token": {
              "title": "Token",
              "type": "string",
              "pattern": "^[A-Fa-f0-9]{32}$",
              "description": "miio 32자리 HEX 토큰"
            },
            "type": {
              "title": "Model (모델)",
              "type": "string",
              "oneOf": [
                { "title": "Mi Air Purifier 2S", "enum": ["MiAirPurifier2S"] },
                { "title": "Mi Air Purifier Pro", "enum": ["MiAirPurifierPro"] }
              ]
            },
            "showTemperature": {
              "title": "Show Temperature Sensor (온도 센서 표시)",
              "type": "boolean",
              "default": true
            },
            "temperatureName": {
              "title": "Temperature Sensor Name (온도 센서 이름)",
              "type": "string",
              "condition": { "functionBody": "return model && model.showTemperature === true;" }
            },
            "showHumidity": {
              "title": "Show Humidity Sensor (습도 센서 표시)",
              "type": "boolean",
              "default": true
            },
            "humidityName": {
              "title": "Humidity Sensor Name (습도 센서 이름)",
              "type": "string",
              "condition": { "functionBody": "return model && model.showHumidity === true;" }
            },
            "showAirQuality": {
              "title": "Show Air Quality Sensor (공기질 센서 표시)",
              "type": "boolean",
              "default": true
            },
            "airQualityName": {
              "title": "Air Quality Sensor Name (공기질 센서 이름)",
              "type": "string",
              "condition": { "functionBody": "return model && model.showAirQuality === true;" }
            },
            "showLED": {
              "title": "Show LED Control Switch (LED 제어 스위치 표시)",
              "type": "boolean",
              "default": false"
            },
            "showBuzzer": {
              "title": "Show Buzzer Control Switch (부저 제어 스위치 표시)",
              "type": "boolean",
              "default": false
            },
            "showModeSwitches": {
              "title": "Show Mode Control Switches (모드 제어 스위치 표시)",
              "description": "자동, 수면, 선호 모드를 제어하는 개별 스위치를 추가합니다.",
              "type": "boolean",
              "default": false
            }
          }
        }
      }
    }
  },
  "layout": [
    {
      "key": "deviceCfgs",
      "type": "array",
      "title": "기기 목록 (ADD DEVICE 버튼으로 추가)",
      "items": [
        "deviceCfgs[].name",
        "deviceCfgs[].ip",
        "deviceCfgs[].token",
        "deviceCfgs[].type",
        "deviceCfgs[].showTemperature",
        "deviceCfgs[].temperatureName",
        "deviceCfgs[].showHumidity",
        "deviceCfgs[].humidityName",
        "deviceCfgs[].showAirQuality",
        "deviceCfgs[].airQualityName",
        "deviceCfgs[].showLED",
        "deviceCfgs[].showBuzzer",
        "deviceCfgs[].showModeSwitches"
      ]
    }
  ]
}
